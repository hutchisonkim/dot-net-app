@page "/"
@inject DotNetApp.Core.Abstractions.IHealthStatusProvider HealthStatusProvider

<PageTitle>Home</PageTitle>

<h1>Hello, world!</h1>

<p>Welcome to your new app.</p>

<h3>API Health</h3>
@if (!_loaded)
{
	<p><em>Checking API...</em></p>
}
else if (_status is null)
{
	<p class="text-warning"><strong>Unavailable</strong> (could not reach API)</p>
}
else
{
	<p class="text-success"><strong>@_status</strong></p>
}

@code {
	private string? _status;
	private bool _loaded;

	protected override async Task OnInitializedAsync()
	{
		_status = await HealthStatusProvider.FetchStatusAsync();
		_loaded = true;
	}
}
