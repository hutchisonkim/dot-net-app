{
  // Tasks to interactively set up a WSL GitHub Actions self-hosted runner
  "version": "2.0.0",
  "inputs": [
    {
      "id": "repoId",
      "type": "promptString",
      "description": "GitHub repository (owner/repo)",
      "default": "<owner>/<repo>"
    },
    {
      "id": "runnerToken",
      "type": "promptString",
      "description": "Ephemeral runner registration token (from GitHub UI)",
      "password": true
    },
    {
      "id": "runnerVersion",
      "type": "promptString",
      "description": "Runner version (blank for default in script)",
      "default": "2.328.0"
    },
    {
      "id": "runnerName",
      "type": "promptString",
      "description": "Optional explicit runner name (blank -> hostname-wsl)",
      "default": ""
    },
    {
      "id": "runnerLabels",
      "type": "promptString",
      "description": "Extra comma-separated labels to append (base: self-hosted,linux,x64,local)",
      "default": ""
    },
    {
      "id": "restartPolicy",
      "type": "pickString",
      "description": "Service restart policy",
      "options": ["on-failure","always"],
      "default": "on-failure"
    },
    {
      "id": "restartSec",
      "type": "promptString",
      "description": "Seconds before service restart (1-300)",
      "default": "8"
    }
  ],
  "tasks": [
    {
      "label": "Setup WSL GitHub Runner (Service)",
      "type": "shell",
      "command": "wsl",
      "args": [
        "-d","Ubuntu","--","bash","-lc",
        "sudo bash ./scripts/gh-runner.sh --repo ${input:repoId} --token ${input:runnerToken} --version ${input:runnerVersion} --name ${input:runnerName} --labels self-hosted,linux,x64,local${input:runnerLabels} --restart-policy ${input:restartPolicy} --restart-sec ${input:restartSec} --service"
      ],
      "options": { "cwd": "${workspaceFolder}" },
      "problemMatcher": []
    },
    {
      "label": "Setup WSL GitHub Runner (Interactive)",
      "type": "shell",
      "command": "wsl",
      "args": [
        "-d","Ubuntu","--","bash","-lc",
        "sudo bash ./scripts/gh-runner.sh --repo ${input:repoId} --token ${input:runnerToken} --version ${input:runnerVersion} --name ${input:runnerName} --labels self-hosted,linux,x64,local${input:runnerLabels}"
      ],
      "options": { "cwd": "${workspaceFolder}" },
      "problemMatcher": []
    },
    {
      "label": "Update / Replace Runner",
      "type": "shell",
      "command": "wsl",
      "args": [
        "-d","Ubuntu","--","bash","-lc",
        "sudo bash ./scripts/gh-runner.sh --repo ${input:repoId} --token ${input:runnerToken} --version ${input:runnerVersion} --name ${input:runnerName} --labels self-hosted,linux,x64,local${input:runnerLabels} --restart-policy ${input:restartPolicy} --restart-sec ${input:restartSec} --replace --service"
      ],
      "options": { "cwd": "${workspaceFolder}" },
      "problemMatcher": []
    },
    {
      "label": "Setup WSL GitHub Runner (Fresh Clean Dir)",
      "type": "shell",
      "command": "wsl",
      "args": [
        "-d","Ubuntu","--","bash","-lc",
        "sudo bash ./scripts/gh-runner.sh --repo ${input:repoId} --token ${input:runnerToken} --version ${input:runnerVersion} --name ${input:runnerName} --labels self-hosted,linux,x64,local${input:runnerLabels} --restart-policy ${input:restartPolicy} --restart-sec ${input:restartSec} --service"
      ],
      "options": { "cwd": "${workspaceFolder}" },
      "problemMatcher": []
    },
    {
      "label": "Setup WSL GitHub Runner (Isolated Label)",
      "type": "shell",
      "command": "wsl",
      "args": [
        "-d","Ubuntu","--","bash","-lc",
        "sudo bash ./scripts/gh-runner.sh --repo ${input:repoId} --token ${input:runnerToken} --version ${input:runnerVersion} --name ${input:runnerName} --labels self-hosted,linux,x64,local${input:runnerLabels} --isolated --restart-policy ${input:restartPolicy} --restart-sec ${input:restartSec} --service"
      ],
      "options": { "cwd": "${workspaceFolder}" },
      "problemMatcher": []
    },
    {
      "label": "Uninstall WSL GitHub Runner",
      "type": "shell",
      "command": "wsl",
      "args": [
        "-d","Ubuntu","--","bash","-lc",
        "sudo bash ./scripts/gh-runner.sh --repo ${input:repoId} --token ${input:runnerToken} --remove"
      ],
      "options": { "cwd": "${workspaceFolder}" },
      "problemMatcher": []
    }
    ,
    {
      "label": "Restart WSL GitHub Runner Service",
      "type": "shell",
      "command": "wsl",
      "args": [
        "-d","Ubuntu","--","bash","-lc",
        "sudo bash ./scripts/gh-runner.sh --restart --restart-policy ${input:restartPolicy} --restart-sec ${input:restartSec}"
      ],
      "options": { "cwd": "${workspaceFolder}" },
      "problemMatcher": []
    }
    ,
    {
      "label": "Runner: Shutdown & Cleanup",
      "type": "shell",
      "command": "wsl",
      "args": [
        "-d","Ubuntu","--","bash","-lc",
        "sudo bash ./scripts/wsl-runner-shutdown.sh"
      ],
      "options": { "cwd": "${workspaceFolder}" },
      "problemMatcher": []
    },
    {
      "label": "Runner: Start / Activate",
      "type": "shell",
      "command": "wsl",
      "args": [
        "-d","Ubuntu","--","bash","-lc",
        "sudo bash ./scripts/wsl-runner-start.sh"
      ],
      "options": { "cwd": "${workspaceFolder}" },
      "problemMatcher": []
    }
  ]
}
